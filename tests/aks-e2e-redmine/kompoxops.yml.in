version: v1
service:
  name: ${SERVICE_NAME}
provider:
  name: aks1
  driver: aks
  settings:
    AZURE_AUTH_METHOD: azure_cli
    AZURE_SUBSCRIPTION_ID: ${AZURE_SUBSCRIPTION_ID}
    AZURE_LOCATION: ${AZURE_LOCATION}
cluster:
  name: cluster1
  existing: false
  ingress:
    certEmail: yaegashi@live.jp
    certResolver: staging
    domain: app-default.kompox.dev
  settings:
    AZURE_AKS_SYSTEM_VM_SIZE: ${AZURE_AKS_SYSTEM_VM_SIZE}
    AZURE_AKS_SYSTEM_VM_DISK_TYPE: ${AZURE_AKS_SYSTEM_VM_DISK_TYPE}
    AZURE_AKS_SYSTEM_VM_DISK_SIZE_GB: ${AZURE_AKS_SYSTEM_VM_DISK_SIZE_GB}
    AZURE_AKS_SYSTEM_VM_PRIORITY: ${AZURE_AKS_SYSTEM_VM_PRIORITY}
    AZURE_AKS_SYSTEM_VM_ZONES: ${AZURE_AKS_SYSTEM_VM_ZONES}
    AZURE_AKS_USER_VM_SIZE: ${AZURE_AKS_USER_VM_SIZE}
    AZURE_AKS_USER_VM_DISK_TYPE: ${AZURE_AKS_USER_VM_DISK_TYPE}
    AZURE_AKS_USER_VM_DISK_SIZE_GB: ${AZURE_AKS_USER_VM_DISK_SIZE_GB}
    AZURE_AKS_USER_VM_PRIORITY: ${AZURE_AKS_USER_VM_PRIORITY}
    AZURE_AKS_USER_VM_ZONES: ${AZURE_AKS_USER_VM_ZONES}
app:
  name: app1
  compose: file:compose.yml
  ingress:
    certResolver: staging
    rules:
      - name: main
        port: 8080
        hosts: [redmine.yb2.banadev.org]
  deployment:
    zone: "1"
  volumes:
    - name: default
      size: 10Gi
      options:
        sku: PremiumV2_LRS
