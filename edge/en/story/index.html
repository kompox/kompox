<!DOCTYPE html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Kompox is a cloud-native application framework for building scalable and maintainable applications on Kubernetes."><meta name=author content="Kompox Team"><link href=https://docs.kompox.dev/edge/en/story/ rel=canonical><link href=../ rel=prev><link rel=alternate href=../../ja/story/ hreflang=ja><link rel=alternate href=./ hreflang=en><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.2"><title>Kompox Story - Kompox Docs</title><link rel=stylesheet href=../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=https://unpkg.com/gridjs@6.2.0/dist/theme/mermaid.min.css><link rel=stylesheet href=../../css/mermaid-lightbox.css><link rel=stylesheet href=../../css/content-width.css><link rel=stylesheet href=../../css/doc-index.css><link rel=stylesheet href=../../css/page-meta.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><link href=../../assets/stylesheets/glightbox.min.css rel=stylesheet><script src=../../assets/javascripts/glightbox.min.js></script><style id=glightbox-style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#kompox-story class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../ title="Kompox Docs" class="md-header__button md-logo" aria-label="Kompox Docs" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Kompox Docs </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Kompox Story </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <div class=md-header__option> <div class=md-select> <button class="md-header__button md-icon" aria-label="Select language"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"></path></svg> </button> <div class=md-select__inner> <ul class=md-select__list> <li class=md-select__item> <a href=../../ja/story/ hreflang=ja class=md-select__link> 日本語 </a> </li> <li class=md-select__item> <a href=./ hreflang=en class=md-select__link> English </a> </li> </ul> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/kompox/kompox title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg> </div> <div class=md-source__repository> kompox/kompox </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../ title="Kompox Docs" class="md-nav__button md-logo" aria-label="Kompox Docs" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg> </a> Kompox Docs </label> <div class=md-nav__source> <a href=https://github.com/kompox/kompox title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg> </div> <div class=md-source__repository> kompox/kompox </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> Kompox Home </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Kompox Story </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Kompox Story </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#starting-point-running-services-on-linux-vms-docker-compose class=md-nav__link> <span class=md-ellipsis> Starting Point: Running Services on Linux VMs + Docker Compose </span> </a> </li> <li class=md-nav__item> <a href=#the-hard-part-stateful-workloads class=md-nav__link> <span class=md-ellipsis> The Hard Part: Stateful Workloads </span> </a> <nav class=md-nav aria-label="The Hard Part: Stateful Workloads"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#kubernetes-and-its-stateless-first-design class=md-nav__link> <span class=md-ellipsis> Kubernetes and Its Stateless-First Design </span> </a> </li> <li class=md-nav__item> <a href=#stateless-vs-stateful class=md-nav__link> <span class=md-ellipsis> Stateless vs. Stateful </span> </a> </li> <li class=md-nav__item> <a href=#constraints-of-rwo-persistent-volumes class=md-nav__link> <span class=md-ellipsis> Constraints of RWO Persistent Volumes </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#kompox-approach-bring-composeyml-to-the-cloud class=md-nav__link> <span class=md-ellipsis> Kompox Approach: Bring compose.yml to the Cloud </span> </a> </li> <li class=md-nav__item> <a href=#what-kompox-aims-to-achieve class=md-nav__link> <span class=md-ellipsis> What Kompox Aims to Achieve </span> </a> </li> <li class=md-nav__item> <a href=#availability-targets-assumed-by-kompox class=md-nav__link> <span class=md-ellipsis> Availability Targets Assumed by Kompox </span> </a> <nav class=md-nav aria-label="Availability Targets Assumed by Kompox"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#intentionally-not-using-core-kubernetes-ha-features class=md-nav__link> <span class=md-ellipsis> Intentionally Not Using Core Kubernetes HA Features </span> </a> </li> <li class=md-nav__item> <a href=#availability-with-a-single-replica-assumption class=md-nav__link> <span class=md-ellipsis> Availability with a Single-Replica Assumption </span> </a> </li> <li class=md-nav__item> <a href=#achieving-rpo0-with-zone-redundant-storage class=md-nav__link> <span class=md-ellipsis> Achieving RPO=0 with Zone-Redundant Storage </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#kompox-development-roadmap class=md-nav__link> <span class=md-ellipsis> Kompox Development Roadmap </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#starting-point-running-services-on-linux-vms-docker-compose class=md-nav__link> <span class=md-ellipsis> Starting Point: Running Services on Linux VMs + Docker Compose </span> </a> </li> <li class=md-nav__item> <a href=#the-hard-part-stateful-workloads class=md-nav__link> <span class=md-ellipsis> The Hard Part: Stateful Workloads </span> </a> <nav class=md-nav aria-label="The Hard Part: Stateful Workloads"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#kubernetes-and-its-stateless-first-design class=md-nav__link> <span class=md-ellipsis> Kubernetes and Its Stateless-First Design </span> </a> </li> <li class=md-nav__item> <a href=#stateless-vs-stateful class=md-nav__link> <span class=md-ellipsis> Stateless vs. Stateful </span> </a> </li> <li class=md-nav__item> <a href=#constraints-of-rwo-persistent-volumes class=md-nav__link> <span class=md-ellipsis> Constraints of RWO Persistent Volumes </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#kompox-approach-bring-composeyml-to-the-cloud class=md-nav__link> <span class=md-ellipsis> Kompox Approach: Bring compose.yml to the Cloud </span> </a> </li> <li class=md-nav__item> <a href=#what-kompox-aims-to-achieve class=md-nav__link> <span class=md-ellipsis> What Kompox Aims to Achieve </span> </a> </li> <li class=md-nav__item> <a href=#availability-targets-assumed-by-kompox class=md-nav__link> <span class=md-ellipsis> Availability Targets Assumed by Kompox </span> </a> <nav class=md-nav aria-label="Availability Targets Assumed by Kompox"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#intentionally-not-using-core-kubernetes-ha-features class=md-nav__link> <span class=md-ellipsis> Intentionally Not Using Core Kubernetes HA Features </span> </a> </li> <li class=md-nav__item> <a href=#availability-with-a-single-replica-assumption class=md-nav__link> <span class=md-ellipsis> Availability with a Single-Replica Assumption </span> </a> </li> <li class=md-nav__item> <a href=#achieving-rpo0-with-zone-redundant-storage class=md-nav__link> <span class=md-ellipsis> Achieving RPO=0 with Zone-Redundant Storage </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#kompox-development-roadmap class=md-nav__link> <span class=md-ellipsis> Kompox Development Roadmap </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/kompox/kompox/edit/main/docs/story/index.en.md title="Edit this page" class="md-content__button md-icon" rel=edit> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"></path></svg> </a> <h1 id=kompox-story>Kompox Story<a class=headerlink href=#kompox-story title="Permanent link">¶</a></h1> <p>This page explains why the author started the Kompox project, what goals Kompox is aiming for, and its mid- to long-term vision.</p> <h2 id=starting-point-running-services-on-linux-vms-docker-compose>Starting Point: Running Services on Linux VMs + Docker Compose<a class=headerlink href=#starting-point-running-services-on-linux-vms-docker-compose title="Permanent link">¶</a></h2> <p>For many years, the author's service infrastructure consisted of many containers running with Docker Compose on many virtual machines (VMs) in the cloud, with a Traefik reverse proxy at the front routing traffic to backend service containers.</p> <p><a class=glightbox data-type=image data-width=auto data-height=auto href=../../story/diag-compose.svg data-desc-position=bottom><img alt src=../../story/diag-compose.svg></a></p> <p>This setup has a proven track record of very stable operation. However, maintenance work such as VM OS updates, security patching, and instance type changes is unavoidable, and operational overhead grows as the number of VMs increases.</p> <p>The project started from a desire to break away from this situation by using cloud-native technologies such as Kubernetes. The goal is to containerize and cloud-native-enable many internal web-service workloads that previously ran on VMs, so operations can be automated through APIs and operational burden can be significantly reduced.</p> <h2 id=the-hard-part-stateful-workloads>The Hard Part: Stateful Workloads<a class=headerlink href=#the-hard-part-stateful-workloads title="Permanent link">¶</a></h2> <h3 id=kubernetes-and-its-stateless-first-design>Kubernetes and Its Stateless-First Design<a class=headerlink href=#kubernetes-and-its-stateless-first-design title="Permanent link">¶</a></h3> <p>Kubernetes is widely adopted as a cloud-native orchestration platform for containers, and many managed services are available around it. However, Kubernetes fundamentally assumes <strong>stateless workloads</strong>—that is, workloads where each container instance does not keep persistent local data.</p> <h3 id=stateless-vs-stateful>Stateless vs. Stateful<a class=headerlink href=#stateless-vs-stateful title="Permanent link">¶</a></h3> <p>A <strong>stateless workload</strong> is an application where each instance does not keep persistent data on its local disk. Even if an instance terminates, no persistent data is lost, and another instance can immediately take over. All persistent data is delegated to external systems (such as managed databases or object storage).</p> <ul> <li>Web frontend servers (serving HTML/CSS/JS)</li> <li>REST API servers that delegate all state to external databases</li> <li>Reverse proxies and load balancers</li> <li>Workers that consume jobs from queues and write results to external systems</li> </ul> <p>A <strong>stateful workload</strong> is an application where each instance keeps persistent data on local disk, and that data must survive Pod restarts and rescheduling.</p> <ul> <li>Relational databases (PostgreSQL, MySQL) — store data files on local disk</li> <li>Git hosting servers (Gitea, GitLab, GHES) — store repositories on local filesystems</li> <li>Wiki/document systems — keep uploaded files and databases locally</li> <li>Legacy applications with embedded databases or local-file dependencies</li> </ul> <p>Some stateful workloads can be migrated to managed services (for example, replacing self-hosted PostgreSQL with managed PostgreSQL). But workloads such as Git hosting servers, applications dependent on custom local-file storage, or legacy applications that cannot be modified cannot simply move to managed services. These applications must run with their own data on local disks.</p> <h3 id=constraints-of-rwo-persistent-volumes>Constraints of RWO Persistent Volumes<a class=headerlink href=#constraints-of-rwo-persistent-volumes title="Permanent link">¶</a></h3> <p>Such local-disk-dependent stateful workloads often require <strong>ReadWriteOnce (RWO)</strong> persistent volumes (PVs) for performance reasons.</p> <p>An RWO PV abstracts VM-attached block devices (Azure Managed Disks, Amazon EBS, Google Persistent Disks, OCI Block Volume, etc.). It delivers high I/O performance, but with a major constraint: it can be attached to <strong>only one node at a time</strong>.</p> <p>In contrast, <strong>ReadWriteMany (RWX)</strong> PVs abstract network file services (NFS/SMB; Azure Files, Amazon EFS, Google Filestore, OCI File Storage, etc.). They can be mounted from multiple nodes simultaneously, but performance is generally moderate.</p> <p>Simple managed container services from cloud providers (Azure Container Apps, AWS Fargate, Google Cloud Run, OCI Container Instances, etc.) support only RWX PVs, and therefore cannot run workloads that require RWO PVs. As a result, <strong>for local-disk-dependent workloads that cannot move to managed services, directly using RWO PVs on Kubernetes is effectively the only option</strong>. This is the biggest challenge in cloud-native modernization for stateful applications.</p> <h2 id=kompox-approach-bring-composeyml-to-the-cloud>Kompox Approach: Bring compose.yml to the Cloud<a class=headerlink href=#kompox-approach-bring-composeyml-to-the-cloud title="Permanent link">¶</a></h2> <p>The local development experience with Docker Compose and <code>compose.yml</code> is simple and powerful. You can freely combine containers (web servers, databases, etc.) with mounted persistent volumes, and bring up the app with a single <code>docker compose up -d</code> command for local validation. The core idea of Kompox is to reproduce that same experience for production services running on cloud Kubernetes clusters.</p> <p>There is a predecessor project called <a href=https://kompose.io>Kompose</a>. Kompose converts Docker Compose files into Kubernetes manifests, but it stops at conversion and is insufficient as a production operations tool.</p> <p>Kompox significantly extends the Kompose idea. It goes beyond <code>compose.yml</code> conversion and into operations of cloud-native resources such as managed Kubernetes clusters, RWO PVs, and disk snapshots across cloud providers, aiming to be practical for production service operation.</p> <p>The diagram below shows the full architecture that Kompox enables. Container groups defined in <code>compose.yml</code> are deployed as Pods on a Kubernetes cluster spanning multiple availability zones (AZs). Persistent data for each Pod is stored on AZ-local RWO disks, with backup and cross-AZ migration through snapshots. In the diagram, "Kubernetes-managed" represents responsibilities handled by Kubernetes itself (Pod scheduling, service routing, etc.), and "Kompox-managed" represents responsibilities handled by Kompox (lifecycle management for RWO disks and snapshots).</p> <p><a class=glightbox data-type=image data-width=auto data-height=auto href=../../story/diag-kompox.svg data-desc-position=bottom><img alt src=../../story/diag-kompox.svg></a></p> <h2 id=what-kompox-aims-to-achieve>What Kompox Aims to Achieve<a class=headerlink href=#what-kompox-aims-to-achieve title="Permanent link">¶</a></h2> <p>Kompox is an orchestration tool to streamline DevOps for stateful containerized web applications built around RWO PVs. Its goals can be summarized as follows:</p> <p><strong>Run a compose.yml-based workflow seamlessly from local to cloud:</strong> <code>compose.yml</code> works as-is with local <code>docker compose</code>, and can also be deployed to managed Kubernetes clusters across cloud providers via the <code>kompoxops</code> CLI. By preparing <code>compose.yml</code> and KOM (Kompox Ops Manifest) config files, developers can auto-generate Kubernetes resource configurations suitable for stateful production workloads and deploy them.</p> <p><strong>Absorb cross-cloud differences:</strong> Through the Provider Driver architecture layer, Kompox absorbs differences in RWO PV and snapshot capabilities across AKS (Azure), OKE (OCI), EKS (AWS), GKE (Google), and K3s (self-hosted). A single set of definitions can be reused in multi-cloud environments.</p> <p><strong>Manage disk and snapshot lifecycles:</strong> From RWO persistent volume creation to backup/restore and migration across AZs, regions, and clouds during failures, Kompox leverages cloud-native snapshot features for automated lifecycle management. Pods, disks, and snapshots are placed and managed with AZ awareness.</p> <p><strong>Optimize node pools and scheduling:</strong> While working within cloud-side capacity and quota constraints, Kompox can configure multiple node pools with different specs and priorities to realize appropriate Pod scheduling, cost optimization, and resilience.</p> <p><strong>Build toward a PaaS:</strong> In the future, Kompox aims to become an internal container-app hosting platform, including RBAC and billing capabilities as a full PaaS.</p> <h2 id=availability-targets-assumed-by-kompox>Availability Targets Assumed by Kompox<a class=headerlink href=#availability-targets-assumed-by-kompox title="Permanent link">¶</a></h2> <h3 id=intentionally-not-using-core-kubernetes-ha-features>Intentionally Not Using Core Kubernetes HA Features<a class=headerlink href=#intentionally-not-using-core-kubernetes-ha-features title="Permanent link">¶</a></h3> <p>When using Kubernetes, it is common to rely on features such as horizontal autoscaling, high availability through multi-replica deployment, and zero-downtime deployment via rolling updates. Kompox, however, <strong>assumes none of these</strong>.</p> <table> <thead> <tr> <th>Typical Kubernetes Capability</th> <th>Kompox Policy</th> </tr> </thead> <tbody> <tr> <td>Horizontal scaling (HPA/VPA)</td> <td>Not used. Each workload is fixed as a single replica</td> </tr> <tr> <td>High availability via multi-replica</td> <td>Not used. No standby failover replicas</td> </tr> <tr> <td>Rolling updates</td> <td>Not feasible. Zero-downtime deployment is fundamentally impossible with a single replica</td> </tr> <tr> <td>Stateless-oriented design</td> <td>Not followed. State is kept locally on RWO disks instead of being delegated to external services</td> </tr> </tbody> </table> <p>The Kubernetes ecosystem evolved around the philosophy of "Cattle, not Pets" (treat instances as replaceable cattle, not precious pets). Kompox takes the opposite stance: it treats each workload as a "Pet" with unique data, while using only Kubernetes infrastructure capabilities—declarative configuration, health checks with auto-restart, and API-driven operational automation. In other words, Kompox uses <strong>Kubernetes as a programmable VM manager</strong>.</p> <h3 id=availability-with-a-single-replica-assumption>Availability with a Single-Replica Assumption<a class=headerlink href=#availability-with-a-single-replica-assumption title="Permanent link">¶</a></h3> <p>Kompox targets <strong>stateful workloads</strong> such as web apps traditionally described and operated with Docker Compose, where all persistent data is contained within the application stack. Each workload is operated as a <strong>single replica</strong> by design. Databases are also kept in containers instead of being moved to managed services, taking advantage of RWO storage performance.</p> <p>Under this assumption, Kompox sets the following availability targets:</p> <table> <thead> <tr> <th>Metric</th> <th>Target</th> <th>Rationale</th> </tr> </thead> <tbody> <tr> <td><strong>RPO</strong> (node failure)</td> <td>0</td> <td>Even if a node fails, the RWO disk is preserved by the cloud platform, so no data loss occurs<br>Database journaling and similar mechanisms preserve committed data after crashes</td> </tr> <tr> <td><strong>RPO</strong> (AZ failure)</td> <td>At the latest snapshot point</td> <td>When migrating to another AZ after an AZ outage, recovery point depends on the latest cross-AZ snapshot<br>RPO depends on snapshot frequency, so periodic snapshot operations are critical<br>However, RPO=0 is achievable when using zone-redundant storage (described below)</td> </tr> <tr> <td><strong>RTO</strong> (planned maintenance)</td> <td>Tens of seconds to a few minutes</td> <td>Planned downtime including node drain, disk reattachment, and Pod startup</td> </tr> <tr> <td><strong>RTO</strong> (unplanned failure / auto-recovery)</td> <td>Tens of minutes to several hours</td> <td>In addition to Kubernetes node-failure detection (default 5–6 minutes), forced disk detach/reattach and Pod restart are required<br>Large incidents such as AZ outages can take even longer</td> </tr> <tr> <td><strong>SLO</strong></td> <td>99.9%</td> <td>Even with a single replica and RTO&gt;0, this level is targeted by establishing service monitoring and auto-recovery via Kubernetes (annual downtime budget: 8.75 hours)</td> </tr> <tr> <td><strong>SLA</strong></td> <td>99.0%</td> <td>Acceptable level for internal services<br>Provides sufficient buffer against SLO for application-layer defects and maintenance time (annual downtime budget: 87.5 hours)</td> </tr> </tbody> </table> <p>Kompox takes responsibility for mechanisms that reduce downtime caused by the RWO constraint of "single-node attachment only."</p> <h3 id=achieving-rpo0-with-zone-redundant-storage>Achieving RPO=0 with Zone-Redundant Storage<a class=headerlink href=#achieving-rpo0-with-zone-redundant-storage title="Permanent link">¶</a></h3> <p>The table above assumes snapshot-point RPO for AZ failures, but some cloud providers offer <strong>zone-redundant</strong> block storage. With this, RPO=0 can be achieved even during AZ failures.</p> <table> <thead> <tr> <th>Cloud</th> <th>Product</th> <th>Summary</th> </tr> </thead> <tbody> <tr> <td><strong>Azure</strong></td> <td>Managed Disks ZRS (Premium SSD v1, Standard SSD)</td> <td>Synchronous replication across 3 AZs in a region. During AZ outages, disks can be reattached in another AZ without data loss. Premium SSD v2 and Ultra Disk do not support ZRS</td> </tr> <tr> <td><strong>Google Cloud</strong></td> <td>Regional Persistent Disks (pd-ssd, pd-balanced)</td> <td>Synchronous replication across 2 zones in a region. Failover is possible to the paired zone on zone failure</td> </tr> <tr> <td><strong>AWS</strong></td> <td>—</td> <td>EBS has no zone-redundant configuration and is always redundant only within a single AZ. AZ-failure recovery depends on snapshot-based restore</td> </tr> <tr> <td><strong>OCI</strong></td> <td>—</td> <td>Block Volume has no cross-AD redundant configuration and is redundant only within a single AD</td> </tr> </tbody> </table> <p>Zone-redundant storage is expensive (typically about 2x the cost of regular block storage) and availability is limited by region, but it is an effective option for workloads requiring RPO=0. Kompox supports zone-redundant storage, with Provider Drivers absorbing provider-specific differences.</p> <h2 id=kompox-development-roadmap>Kompox Development Roadmap<a class=headerlink href=#kompox-development-roadmap title="Permanent link">¶</a></h2> <p>Kompox has the following roadmap:</p> <ul> <li>v1 (Kompox CLI)<ul> <li>Implement the core <code>kompoxops</code> CLI and Provider Driver, enabling deployment and snapshot management for simple Compose apps with RWO PV on AKS.</li> <li>Define and implement the KOM (Kompox Ops Manifest) format for layered configuration management across Workspace, Provider, Cluster, and App.</li> <li>Add support for other cloud providers such as OKE, EKS, GKE, and K3s to enable multi-cloud reuse of the same definition files.</li> <li>Implement auto-recovery from large incidents such as AZ outages to significantly reduce RTO.</li> </ul> </li> <li>v2 (Kompox PaaS)<ul> <li>Based on the Kompox CLI implementation, add the following Kubernetes-targeted components:<ul> <li>Kompox CRD: Enable definition and management of Compose apps as Kubernetes-native resources.</li> <li>Kompox Operator: Manage application lifecycle as a Kubernetes controller.</li> </ul> </li> <li>Implement multi-tenant PaaS capabilities to realize an internal container application hosting platform.<ul> <li>Allow multiple teams/projects to host applications independently on a single Kompox instance.</li> <li>Implement billing based on cloud resource usage to support cost management.</li> </ul> </li> </ul> </li> </ul> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="February 19, 2026 23:08:19 UTC">February 19, 2026 23:08:19</span> </span> <span class=md-source-file__fact> <span class=md-icon title=Created> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"></path></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="February 19, 2026 23:08:19 UTC">February 19, 2026 23:08:19</span> </span> </aside> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["navigation.tracking", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.action.edit", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.79ae519e.min.js></script> <script src=https://unpkg.com/mermaid@10.4.0/dist/mermaid.min.js></script> <script src=https://unpkg.com/gridjs@6.2.0/dist/gridjs.umd.js></script> <script src=../../js/mermaid-init.js></script> <script src=../../js/doc-index.js></script> <script id=init-glightbox>const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>